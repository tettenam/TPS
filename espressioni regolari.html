<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Registrazione dati</title>
<style>
body { font-family: Arial; background: #f4f4f4; }
.card { width: 500px; margin: 20px auto; background: white; padding: 20px; border-radius: 10px; }
.input-row { margin-bottom: 10px; }
label { display: block; font-weight: bold; }
button { padding: 8px 15px; cursor: pointer; }
#output { margin-top: 20px; padding: 15px; background: #e9f5e9; display: none; border-radius: 8px; }
</style>
</head>

<body>

<div class="card">
<h2>Inserisci i tuoi dati</h2>

<div class="input-row">
<label for="nome">Nome:</label>
<input type="text" id="nome">
</div>

<div class="input-row">
<label for="cognome">Cognome:</label>
<input type="text" id="cognome">
</div>

<div class="input-row">
<label for="email">Email:</label>
<input type="text" id="email">
</div>

<div class="input-row">
<label for="cap">CAP:</label>
<input type="text" id="cap">
</div>

<div class="input-row">
<label for="codiceFiscale">Codice Fiscale:</label>
<input type="text" id="codiceFiscale">
</div>

<div class="input-row">
<label for="anno">Anno di nascita:</label>
<input type="number" id="anno" min="1900" max="2025">
</div>

<div class="input-row">
<button type="button" onclick="stampaDati()">Invia</button>
</div>

<div id="output"></div>
</div>

<script>
function stampaDati() {

    const user = {};

    user.nome = document.getElementById("nome").value.trim();
    user.cognome = document.getElementById("cognome").value.trim();
    user.email = document.getElementById("email").value.trim();
    user.cap = document.getElementById("cap").value.trim();
    user.codiceFiscale = document.getElementById("codiceFiscale").value.trim().toUpperCase();
    user.anno = document.getElementById("anno").value.trim();

    // RegExp semplici
    const nomePattern = /^[A-Za-zÀ-ÿ\s]{2,30}$/;
    const capPattern = /^\d{5}$/;
    const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    const codiceFiscalePattern = /^[A-Z]{6}\d{2}[A-Z]\d{2}[A-Z]\d{3}[A-Z]$/;

    // Controllo campi vuoti
    if (!user.nome || !user.cognome || !user.email || !user.cap || !user.codiceFiscale || user.anno === "") {
        alert("Compila tutti i campi!");
        return;
    }

    // Validazioni con RegExp
    if (!nomePattern.test(user.nome)) {
        alert("Nome non valido (solo lettere, minimo 2 caratteri)");
        return;
    }

    if (!nomePattern.test(user.cognome)) {
        alert("Cognome non valido (solo lettere, minimo 2 caratteri)");
        return;
    }

    if (!capPattern.test(user.cap)) {
        alert("CAP non valido (5 numeri)");
        return;
    }

    if (!emailPattern.test(user.email)) {
        alert("Email non valida");
        return;
    }

    if (!codiceFiscalePattern.test(user.codiceFiscale)) {
        alert("Codice Fiscale non valido (16 caratteri corretti)");
        return;
    }

    const anno = parseInt(user.anno, 10);
    if (isNaN(anno)) {
        alert("Anno non valido");
        return;
    }

    const eta = new Date().getFullYear() - anno;

    const outputDiv = document.getElementById("output");
    outputDiv.style.display = "block";

    outputDiv.innerHTML =
        "<h3>Dati inseriti:</h3>" +
        "<div><strong>Nome:</strong> " + user.nome + "</div>" +
        "<div><strong>Cognome:</strong> " + user.cognome + "</div>" +
        "<div><strong>Email:</strong> " + user.email + "</div>" +
        "<div><strong>CAP:</strong> " + user.cap + "</div>" +
        "<div><strong>Codice Fiscale:</strong> " + user.codiceFiscale + "</div>" +
        "<div><strong>Età:</strong> " + eta + " anni</div>";
}
</script>

</body>
</html>
